{"version":3,"sources":["js/weather.js"],"names":["COORDS","API_KEY","weather","document","querySelector","getWeather","lat","lon","fetch","then","response","json","temperature","main","temp","place","name","innerText","saveCoords","coordsObj","localStorage","setItem","JSON","stringify","handleGeoSuccess","position","latitude","coords","longitude","handleGeoError","console","log","askForCoords","navigator","geolocation","getCurrentPosition","loadCoords","loadedCoords","getItem","parseCoords","parse","init"],"mappings":"AAAA,IAAMA,MAAM,GAAG,QAAf;AACA,IAAMC,OAAO,GAAG,kCAAhB;AACA,IAAMC,OAAO,GAAGC,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAhB;;AAEA,SAASC,UAAT,CAAoBC,GAApB,EAAyBC,GAAzB,EAA8B;AAC5BC,EAAAA,KAAK,+DACoDF,GADpD,kBAC+DC,GAD/D,oBAC4EN,OAD5E,mBAAL,CAGGQ,IAHH,CAGQ,UAAUC,QAAV,EAAoB;AACxB,WAAOA,QAAQ,CAACC,IAAT,EAAP;AACD,GALH,EAMGF,IANH,CAMQ,UAAUE,IAAV,EAAgB;AACpB,QAAMC,WAAW,GAAGD,IAAI,CAACE,IAAL,CAAUC,IAA9B;AACA,QAAMC,KAAK,GAAGJ,IAAI,CAACK,IAAnB;AACAd,IAAAA,OAAO,CAACe,SAAR,0BAA0BF,KAA1B,iCAAuCH,WAAvC;AACD,GAVH;AAWD;;AAED,SAASM,UAAT,CAAoBC,SAApB,EAA+B;AAC7BC,EAAAA,YAAY,CAACC,OAAb,CAAqBrB,MAArB,EAA6BsB,IAAI,CAACC,SAAL,CAAeJ,SAAf,CAA7B;AACD;;AAED,SAASK,gBAAT,CAA0BC,QAA1B,EAAoC;AAClC,MAAMC,QAAQ,GAAGD,QAAQ,CAACE,MAAT,CAAgBD,QAAjC;AACA,MAAME,SAAS,GAAGH,QAAQ,CAACE,MAAT,CAAgBC,SAAlC;AACA,MAAMT,SAAS,GAAG;AAChBO,IAAAA,QAAQ,EAARA,QADgB;AAEhBE,IAAAA,SAAS,EAATA;AAFgB,GAAlB;AAIAV,EAAAA,UAAU,CAACC,SAAD,CAAV;AACAd,EAAAA,UAAU,CAACqB,QAAD,EAAWE,SAAX,CAAV;AACD;;AAED,SAASC,cAAT,GAA0B;AACxBC,EAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACD;;AAED,SAASC,YAAT,GAAwB;AACtBC,EAAAA,SAAS,CAACC,WAAV,CAAsBC,kBAAtB,CAAyCX,gBAAzC,EAA2DK,cAA3D;AACD;;AAED,SAASO,UAAT,GAAsB;AACpB,MAAMC,YAAY,GAAGjB,YAAY,CAACkB,OAAb,CAAqBtC,MAArB,CAArB;;AACA,MAAIqC,YAAY,KAAK,IAArB,EAA2B;AACzBL,IAAAA,YAAY;AACb,GAFD,MAEO;AACL,QAAMO,WAAW,GAAGjB,IAAI,CAACkB,KAAL,CAAWH,YAAX,CAApB;AACAhC,IAAAA,UAAU,CAACkC,WAAW,CAACb,QAAb,EAAuBa,WAAW,CAACX,SAAnC,CAAV;AACD;AACF;;AAED,SAASa,IAAT,GAAgB;AACdL,EAAAA,UAAU;AACX;;AAEDK,IAAI","file":"weather.2dcc02e5.js","sourceRoot":"..","sourcesContent":["const COORDS = \"coords\";\r\nconst API_KEY = \"532b43b6e382f182b0c43695a34f48ae\";\r\nconst weather = document.querySelector(\".js-weather\");\r\n\r\nfunction getWeather(lat, lon) {\r\n  fetch(\r\n    `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`\r\n  )\r\n    .then(function (response) {\r\n      return response.json();\r\n    })\r\n    .then(function (json) {\r\n      const temperature = json.main.temp;\r\n      const place = json.name;\r\n      weather.innerText = `현재 ${place} 기온은 ${temperature}℃ `;\r\n    });\r\n}\r\n\r\nfunction saveCoords(coordsObj) {\r\n  localStorage.setItem(COORDS, JSON.stringify(coordsObj));\r\n}\r\n\r\nfunction handleGeoSuccess(position) {\r\n  const latitude = position.coords.latitude;\r\n  const longitude = position.coords.longitude;\r\n  const coordsObj = {\r\n    latitude,\r\n    longitude,\r\n  };\r\n  saveCoords(coordsObj);\r\n  getWeather(latitude, longitude);\r\n}\r\n\r\nfunction handleGeoError() {\r\n  console.log(\"Can't access geo location\");\r\n}\r\n\r\nfunction askForCoords() {\r\n  navigator.geolocation.getCurrentPosition(handleGeoSuccess, handleGeoError);\r\n}\r\n\r\nfunction loadCoords() {\r\n  const loadedCoords = localStorage.getItem(COORDS);\r\n  if (loadedCoords === null) {\r\n    askForCoords();\r\n  } else {\r\n    const parseCoords = JSON.parse(loadedCoords);\r\n    getWeather(parseCoords.latitude, parseCoords.longitude)\r\n  }\r\n}\r\n\r\nfunction init() {\r\n  loadCoords();\r\n}\r\n\r\ninit();\r\n"]}